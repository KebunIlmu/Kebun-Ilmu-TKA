<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Try Out TKA Matematika Wajib- Kebun Ilmu</title>
	 <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f9ff;
    }

    header {
      position: sticky;
      top: 0;
      background-color: #1e88e5;
      color: white;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .menu-button, .timer {
      background: white;
      color: #1e88e5;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      font-weight: bold;
      cursor: default;
    }

    .container {
      display: flex;
      height: calc(100vh - 60px);
    }

    .left-panel {
      width: 25%;
      background-color: #e3f2fd;
      padding: 20px;
      border-right: 1px solid #cfd8dc;
      overflow-y: auto;
    }

    .right-panel {
      width: 75%;
      padding: 30px;
      overflow-y: auto;
    }

    .question-buttons {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }

    .question-buttons button {
      padding: 6px;
      font-size: 13px;
      background-color: white;
      border: 1.5px solid #1e88e5;
      border-radius: 6px;
      color: #1e88e5;
      cursor: pointer;
      transition: 0.2s;
    }

    .question-buttons button:hover {
      background-color: #bbdefb;
    }

    .question-buttons button.active {
      background-color: #1565c0;
      color: white;
    }

    .navigation {
      margin-top: 30px;
    }

    .navigation button {
      padding: 10px 18px;
      margin: 5px;
      background-color: #1e88e5;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    .navigation button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    .option {
      display: block;
      padding: 10px 15px;
      margin: 10px 0;
      border: 1.5px solid #90caf9;
      border-radius: 6px;
      background-color: white;
      cursor: pointer;
      transition: 0.2s;
    }

    .option:hover {
      background-color: #e3f2fd;
    }

    .option input {
      margin-right: 10px;
    }

    #scoreDisplay {
      margin-top: 20px;
      font-weight: bold;
      color: #1e88e5;
      display: none;
    }

    #submitBtn {
      padding: 10px 18px;
      margin-top: 20px;
      background-color: #43a047;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      display: none;
    }

    #submitBtn:hover {
      background-color: #388e3c;
    }
 /* tambahan style untuk tabel benar salah */
    /* ===== Modern Friendly True-False Table ===== */
table.true-false {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  margin-top: 15px;
  font-family: "Segoe UI", Roboto, sans-serif;
  font-size: 15px;
  background-color: #ffffff;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

/* Header */
table.true-false thead th {
  background: linear-gradient(to right, #e3f2fd, #bbdefb);
  color: #0d47a1;
  font-weight: 600;
  text-transform: uppercase;
  padding: 10px;
  text-align: center;
  border-bottom: 2px solid #90caf9;
}

/* Sel isi */
table.true-false td {
  border-bottom: 1px solid #e3f2fd;
  padding: 10px 12px;
  text-align: center;
  color: #333;
  transition: background-color 0.2s ease;
}

/* Kolom pertama (pernyataan) */
table.true-false td:first-child {
  text-align: left;
  color: #222;
  font-weight: 500;
}

/* Efek hover tiap baris */
table.true-false tbody tr:hover {
  background-color: #f7fbff;
}

/* Radio button modern */
table.true-false input[type="radio"] {
  transform: scale(1.2);
  accent-color: #1e88e5; /* biru modern */
  cursor: pointer;
}

/* Efek baris yang dipilih */
table.true-false tr:has(input[type="radio"]:checked) {
  background-color: #eaf3ff;
  transition: background-color 0.2s ease;
}
/* Login Box */
#loginForm {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background-color: #e3f2fd;
}
.login-box {
  background: white;
  padding: 30px 40px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  width: 320px;
  text-align: center;
}
.login-box h2 {
  color: #1565c0;
  margin-bottom: 20px;
}
.login-box input {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border: 1.5px solid #90caf9;
  border-radius: 6px;
}
.login-box button {
  width: 100%;
  padding: 10px;
  background-color: #1e88e5;
  border: none;
  color: white;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
}
#errorMsg {
  color: red;
  margin-top: 10px;
}
.hidden { display: none; }
  </style>
</head>

<body>
<!-- ====== LOGIN SCREEN ====== -->
<div id="loginForm">
  <div class="login-box">
    <h2>Login Try Out</h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="checkLogin()">Masuk</button>
    <p id="errorMsg"></p>
  </div>
</div>
<div id="pesertaForm" class="hidden" style="justify-content:center; align-items:center; height:100vh; background-color:#f4f9ff; padding:20px; box-sizing:border-box;">
  <div style="background:white; padding:30px 20px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); width:100%; max-width:400px; text-align:center;">
    <h2 style="margin-bottom:20px; color:#1E88E5;">Data Peserta</h2>

    <input id="nik" placeholder="NIK" style="width:100%; padding:10px; margin-bottom:15px; border:1.5px solid #90CAF9; border-radius:6px; font-size:16px; box-sizing:border-box;">
    <input id="namaPeserta" placeholder="Nama Peserta" style="width:100%; padding:10px; margin-bottom:15px; border:1.5px solid #90CAF9; border-radius:6px; font-size:16px; box-sizing:border-box;">

    <select id="jk" style="width:100%; padding:10px; margin-bottom:15px; border:1.5px solid #90CAF9; border-radius:6px; font-size:16px; box-sizing:border-box;">
      <option value="">Jenis Kelamin</option>
      <option value="L">Laki-laki</option>
      <option value="P">Perempuan</option>
    </select>

    <input id="tglLahir" type="date" style="width:100%; padding:10px; margin-bottom:15px; border:1.5px solid #90CAF9; border-radius:6px; font-size:16px; box-sizing:border-box;">
    <input id="sekolah" placeholder="Nama Sekolah" style="width:100%; padding:10px; margin-bottom:15px; border:1.5px solid #90CAF9; border-radius:6px; font-size:16px; box-sizing:border-box;">
    <input id="tokenUjian" placeholder="Token Ujian" style="width:100%; padding:10px; margin-bottom:15px; border:1.5px solid #90CAF9; border-radius:6px; font-size:16px; box-sizing:border-box;">

    <button onclick="mulaiUjian()" style="width:100%; padding:12px; background-color:#1E88E5; color:white; border:none; border-radius:6px; font-weight:bold; cursor:pointer; font-size:16px;"
      onmouseover="this.style.backgroundColor='#1565C0';" 
      onmouseout="this.style.backgroundColor='#1E88E5';">
      Mulai Ujian
    </button>
    <p id="errorPeserta" style="margin-top:10px; font-size:14px; color:red;"></p>
  </div>
</div>

<!-- ====== TRYOUT CONTENT ====== -->
<div id="content22" class="hidden">
<header>
  <h2>Try Out TKA Matematika SD/MI - Kebun Ilmu</h2>
  <div>
    <button id="fullscreenBtn" class="menu-button">Fullscreen</button>
    <span class="timer" id="timer">60:00</span>
  </div>
</header>

<div class="container">
  <div class="left-panel">
    <h3>Soal</h3>
    <div class="question-buttons" id="questionButtons"></div>
    <div id="scoreDisplay"></div>
  </div>

  <div class="right-panel">
    <div id="questionDisplay"></div>
    <div class="navigation">
      <button id="prevBtn">Sebelumnya</button>
      <button id="nextBtn">Selanjutnya</button>
      <button id="submitBtn">Submit</button>
    </div>
  </div>
</div>

</div>

<script>
function mulaiUjian() {
  const nik = document.getElementById("nik").value.trim();
  const nama = document.getElementById("namaPeserta").value.trim();
  const jk = document.getElementById("jk").value;
  const tgl = document.getElementById("tglLahir").value;
  const sekolah = document.getElementById("sekolah").value.trim();
  const token = document.getElementById("tokenUjian").value.trim();

  if (!nik || !nama || !jk || !tgl || !sekolah || !token) {
    document.getElementById("errorPeserta").innerText = "âŒ Semua data wajib diisi";
    return;
  }

  if (token !== "KI2025") {
    document.getElementById("errorPeserta").innerText = "âŒ Token salah";
    return;
  }

  // simpan data peserta sementara
  window.dataPeserta = { nik, nama, jk, tgl, sekolah, token };

  // sembunyikan form peserta dan tampilkan konten try out
  document.getElementById("pesertaForm").style.display = "none";
  document.getElementById("content22").classList.remove("hidden");

  // ğŸ”¥ render soal dan start timer di sini
  renderQuestionButtons();
  renderQuestion(currentQuestion);
  startTimer(60 * 60);
}

// ====== DATA AKUN + KADALUWARSA ======
const accounts = [
  { username: "zahwan", password: "132611", expire: "3000-08-24T23:59:59" },
  { username: "MRI",  password: "2026",  expire: "2026-4-11T23:59:59" },
  { username: "nadira", password: "nad322", expire: "2025-10-30T23:59:59" },
  { username: "silva",  password: "sil345", expire: "2025-10-31T23:59:59" },
  { username: "nisa",   password: "nis223", expire: "2025-10-30T23:59:59" },
  { username: "faiq",   password: "fa3456", expire: "2025-10-38T23:59:59" },
];

// ====== LOGIN FUNCTION ======
function checkLogin() {
  const user = document.getElementById("username").value.trim();
  const pass = document.getElementById("password").value.trim();

  const found = accounts.find(acc => acc.username === user && acc.password === pass);
  const errorMsg = document.getElementById("errorMsg");

  if (!found) {
    errorMsg.innerText = "âŒ Username atau password salah!";
    return;
  }

  const now = new Date();
  const expireDate = new Date(found.expire);

  if (now > expireDate) {
    errorMsg.innerText = `âš ï¸ Akun ${user} sudah kadaluwarsa!`;
    return;
  }

  localStorage.setItem('loggedInUser', JSON.stringify({ username: user }));
  showContent();
}

// ====== CEK SESSION SAAT HALAMAN DIMUAT ======
function checkSession() {
  const data = JSON.parse(localStorage.getItem('loggedInUser') || 'null');
  if (!data) return;
  const acc = accounts.find(a => a.username === data.username);
  if (!acc || new Date() > new Date(acc.expire)) {
    localStorage.removeItem('loggedInUser');
    document.getElementById("loginForm").style.display = "flex";
    document.getElementById("content22").classList.add("hidden");
    return;
  }
  showContent();
}

// ====== TAMPILKAN KONTEN DAN MULAI TRY OUT ======
function showContent() {
  document.getElementById("loginForm").style.display = "none";
  document.getElementById("pesertaForm").style.display = "flex";
  
}

  const questions = [
{
  type: "mc_multiple",
  text: `Sebuah toko alat tulis menjual 15 pensil. Harga setiap pensil Rp1.250,00.Dari hasil penjualan, sebanyak Rp8.400,00 digunakan untuk modal. Sementara uang sisa hasil penjualan merupakan keuntungan toko.<br><br>Pilihlah pernyataan yang benar! (Jawaban benar lebih dari satu)
  `,
  options: [
    "Hasil penjualan pensil sebanyak Rp18.750,00.",
    "Keuntungan toko dari penjualan pensil sebanyak Rp10.350,00.",
    "Jika toko mengambil keuntungan Rp150,00 setiap pensil, uang modal yang disisihkan dapat digunakan untuk membeli 10 pensil."
  ],
  correct: [0, 1]
},
{
  type: "true_false",
  text: `
    Diketahui \\(p = 2.458\\), \\(q = 3.672\\), dan \\(r = q - 2.287\\).<br>
    Berdasarkan informasi tersebut, tentukan Benar atau Salah untuk setiap pernyataan berikut!<br><br>
    Tentukan benar (B) atau salah (S) untuk setiap pernyataan berikut:
  `,
  statements: [
    "Nilai \\(r\\) adalah 1.385.",
    "Nilai \\(p + q - r\\) adalah 4.754.",
    "Nilai \\((p + q) - r\\) tidak sama dengan \\(p + (q - r)\\)."
  ],
  correct: [true, false, false]
},
{
  type: "mc",
  text: "Bentuk paling sederhana dari \\( \\frac{56}{36} \\) adalah â€¦",
  options: [
    "\\(1\\tfrac{1}{2}\\)",
    "\\(1\\tfrac{1}{4}\\)",
    "\\(1\\tfrac{5}{9}\\)",
    "\\(1\\tfrac{2}{3}\\)"
  ],
  correct: 2
},
{
  type: "mc_multiple",
  text: `
    Di sebuah gedung terdapat lima tangki air berukuran sama. Kelima tangki berisi air dengan volume berbeda-beda.<br>
    Tangki A terisi \\( \\tfrac{3}{8} \\) bagian dari kapasitasnya, tangki B terisi \\( \\tfrac{13}{40} \\) bagian dari kapasitasnya,<br>
    tangki C terisi 32,2% dari kapasitasnya, tangki D terisi \\( \\tfrac{11}{30} \\) bagian dari kapasitasnya,<br>
    dan tangki E terisi 0,315 bagian dari kapasitasnya.<br><br>
    Pilihlah pernyataan yang benar! (Jawaban benar lebih dari satu)
  `,
  options: [
    "Volume air di tangki B lebih banyak daripada tangki C.",
    "Tangki dengan volume air paling banyak adalah tangki D.",
    "Urutan tangki berdasarkan volume air dari yang terbanyak adalah A, D, B, C, dan E."
  ],
  correct: [0, 2]
},
{
  type: "mc_multiple",
  text: `
    Diketahui tiga pecahan, yaitu \\( \\tfrac{6}{7} \\), \\( \\tfrac{24}{14} \\), dan \\( 2\\tfrac{1}{6} \\).<br>
    Manakah operasi hitung dari ketiga pecahan tersebut yang benar?<br><br>
    Pilihlah operasi hitung yang benar! (Jawaban benar lebih dari satu)
  `,
  options: [
    "Hasil dari \\( \\tfrac{6}{7} : \\tfrac{24}{14} \\times 2\\tfrac{1}{6} \\) adalah \\( 2\\tfrac{2}{24} \\).",
    "Hasil dari \\( \\tfrac{24}{14} : \\tfrac{6}{7} : 2\\tfrac{1}{6} \\) adalah \\( \\tfrac{12}{13} \\).",
    "Hasil dari \\( \\tfrac{6}{7} \\times \\tfrac{24}{14} \\times 2\\tfrac{1}{6} \\) adalah \\( 3\\tfrac{9}{49} \\)."
  ],
  correct: [1, 2]
},
{
  type: "true_false",
  text: `
    Pak Harno setiap bulan menerima gaji sebagai karyawan sebuah perusahaan sebesar Rp5.000.000,00. Sebanyak 0,05 bagian dari gaji Pak Harno disedekahkan, \\( \\tfrac{1}{4} \\) bagian untuk biaya pendidikan,40% untuk kebutuhan sehari-hari, dan sisanya ditabung.<br><br>
    Tentukan benar (B) atau salah (S) untuk setiap pernyataan berikut:
  `,
  statements: [
    "Gaji Pak Harno yang ditabung \\( \\tfrac{3}{10} \\) bagian.",
    "Bagian gaji untuk biaya pendidikan dan kebutuhan sehari-hari sebesar Rp3.250.000,00.",
    "Bagian gaji yang ditabung sebesar Rp1.500.000,00."
  ],
  correct: [true, true, true]
},
{
  type: "mc",
  text: "Bu Rina memiliki toko kelontong. Penjual roti berkunjung tiap 4 hari dan penjual telur berkunjung tiap 5 hari. Pada 1 Agustus 2025 kedua penjual tersebut bersama-sama mengunjungi toko. Tiap berapa hari penjual roti dan penjual telur berkunjung bersama-sama ke toko?",
  options: [
    "10 hari",
    "12 hari",
    "15 hari",
    "20 hari"
  ],
  correct: 3
},
{
  type: "mc_multiple",
  text: `
    Bu Rina memiliki toko kelontong. Toko tersebut dikunjungi beberapa penjual untuk memasok dagangan. Penjual roti berkunjung tiap 4 hari, sedangkan penjual telur berkunjung tiap 5 hari. Pada 1 Agustus 2025 kedua penjual tersebut bersama-sama mengunjungi toko.<br><br>
    Kapan penjual roti dan penjual telur bersama-sama lagi mengunjungi toko?<br>
    (Jawaban benar lebih dari satu)
  `,
  options: [
    "Pada 21 Agustus 2025.",
    "Pada 9 September 2025.",
    "Pada 10 September 2025."
  ],
  correct: [0, 2]
},
{
  type: "mc",
  text: `
    Sebuah bangun datar mempunyai sifat-sifat sebagai berikut:<br>
    (i) Mempunyai empat sisi.<br>
    (ii) Sisi yang berhadapan sejajar.<br>
    (iii) Sudut yang berhadapan sama besar.<br>
    (iv) Kedua diagonal tidak sama panjang.<br><br>
    Bangun datar tersebut adalah â€¦
  `,
  options: [
    "Belah ketupat",
    "Layang-layang",
    "Jajargenjang",
    "Persegi"
  ],
  correct: 2
},
{
  type: "mc_multiple",
  text: `
    Perhatikan gambar berikut!<br><br>
    <img src="https://i.imgur.com/pmIxCfZ.png"
         alt="Tampilan susunan kubus dari depan"
         style="max-width:320px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.2); margin-top:8px;"><br><br>
    Manakah susunan kubus yang dilihat dari depan tampilannya seperti gambar di samping?<br>
    <b>Jawaban benar lebih dari satu.</b>
  `,
  options: [
    "<img src='https://i.imgur.com/P6B72VD.png' style='width:150px'>",
    "<img src='https://i.imgur.com/auOWN01.png' style='width:150px'>",
    "<img src='https://i.imgur.com/h4oue3u.png' style='width:150px'>"
  ],
  correct: [0, 1]
},
{
  type: "mc",
  text: "Hasil dari 2,5 m âˆ’ 18 cm + 800 mm adalah â€¦",
  options: [
    "87 cm",
    "240 cm",
    "312 cm",
    "2.562 cm"
  ],
  correct: 2
},
{
  type: "true_false",
  text: `
    Sebuah tangki mobil Pak Robin berisi pertamax sebanyak 2,6 dal.<br>
    Setelah menempuh perjalanan, pertamax di dalam tangki tersisa 15.000 \\(\\text{cm}^3\\).<br><br>
    Berdasarkan informasi tersebut, tentukan benar (B) atau salah (S) untuk setiap pernyataan berikut:
  `,
  statements: [
    "Volume pertamax semula 26 liter.",
    "Volume pertamax yang tersisa 15 liter.",
    "Volume pertamax yang digunakan dalam perjalanan 9 liter."
  ],
  correct: [true, true, false]
},
{
  type: "mc",
  text: `
    Hasil dari <b>1.800 cg + 2,5 dag âˆ’ 6 g</b> adalah â€¦
  `,
  options: [
    "37 g",
    "199 g",
    "262 g",
    "424 g"
  ],
  correct: 0
},
{
  type: "mc_multiple",
  text: `
    Bu Santi mempunyai 872 dag kedelai.<br>
    Sebanyak 6.925 g kedelai telah diolah menjadi tahu dan tempe.<br><br>
    Pilihlah pernyataan yang benar! (Jawaban benar lebih dari satu)
  `,
  options: [
    "Berat kedelai semula sekitar 8 kg.",
    "Berat kedelai yang diolah menjadi tahu dan tempe sekitar 7 kg.",
    "Berat kedelai tersisa sekitar 2 kg."
  ],
  correct: [1, 2]
},
{
  type: "mc",
  text: "Reni mengerjakan 15 soal Matematika. Setiap soal memerlukan waktu 3 menit. Jika Reni mulai mengerjakan soal pada pukul 07.40, semua soal akan selesai dikerjakan pada pukul â€¦",
  options: [
    "08.05",
    "08.15",
    "08.25",
    "08.35"
  ],
  correct: 2
},
{
  type: "mc_multiple",
  text: `
    Bu Ida, Pak Roni, dan Bu Maya adalah guru di sekolah yang sama.<br>
    Bu Ida berangkat ke sekolah dengan kecepatan rata-rata 45 km/jam dan waktu tempuh 40 menit.<br>
    Pak Roni berangkat ke sekolah dengan kecepatan rata-rata 60 km/jam dan waktu tempuh 30 menit.<br>
    Bu Maya berangkat ke sekolah dengan kecepatan rata-rata 50 km/jam dan waktu tempuh 30 menit.<br><br>
    Bagaimana perbandingan jarak antara rumah mereka dengan sekolah?<br>
    <b>Jawaban benar lebih dari satu.</b>
  `,
  options: [
    "Rumah Bu Ida lebih jauh dari sekolah dibandingkan dengan rumah Bu Maya.",
    "Rumah Pak Roni dan rumah Bu Ida berjarak sama dari sekolah.",
    "Rumah Bu Maya dan Pak Roni sama jauhnya dari sekolah."
  ],
  correct: [0, 1]
},
{
  type: "mc",
  text: `
    Perhatikan gambar layang-layang berikut!<br>
    <img src="https://www.advernesia.com/wp-content/uploads/2018/10/contoh-soal-layang-layang-dan-jawabannya.png"
         alt="Gambar layang-layang"
         style="max-width:300px; border-radius:8px; margin-top:8px;"><br><br>
    Berapa keliling layang-layang pada gambar?
  `,
  options: [
    "50 cm",
    "74 cm",
    "100 cm",
    "120 cm"
  ],
  correct: 2
},

{
  type: "mc_multiple",
  text: `
    Perhatikan gabungan bangun segitiga dan persegi panjang berikut!<br><br>
    <img src="https://i.imgur.com/DeUgCWH.png"
         alt="Gabungan bangun segitiga dan persegi panjang"
         style="max-width:320px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.2); margin-top:8px;"><br><br>
    Berdasarkan gambar tersebut, manakah pernyataan berikut yang benar?<br>
    <b>Jawaban benar lebih dari satu.</b>
  `,
  options: [
    "Luas segitiga DCE adalah 108 cmÂ².",
    "Luas persegi panjang ABCE adalah 160 cmÂ².",
    "Jumlah luas persegi panjang dan segitiga pada gambar adalah 270 cmÂ²."
  ],
  correct: [0, 2]
},
{
  type: "true_false",
  text: `
    Rika membantu ibu membuat taplak meja dari berbagai kain. Rika menemukan tiga potongan kain sebagai berikut:<br>
    1) Potongan kain berbentuk persegi dengan panjang sisi 40 cm.<br>
    2) Potongan kain berbentuk trapesium dengan panjang sisi sejajar 20 cm dan 30 cm serta tinggi 10 cm.<br>
    3) Potongan kain berbentuk belah ketupat dengan panjang diagonal 24 cm dan 18 cm.<br><br>
    Berdasarkan informasi tersebut, tentukan Benar atau Salah untuk setiap pernyataan berikut!
  `,
  statements: [
    "Luas potongan kain persegi adalah 1.600 cmÂ².",
    "Luas potongan kain trapesium adalah 240 cmÂ².",
    "Luas potongan kain belah ketupat adalah 216 cmÂ²."
  ],
  correct: [true, false, true]
},

{
  type: "mc_multiple",
  text: `
    Perhatikan gabungan bangun ruang balok dan kubus berikut!<br><br>
    <img src="https://i.imgur.com/oHFketR.png"
         alt="Gabungan balok dan kubus"
         style="max-width:320px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.2); margin-top:8px;"><br><br>
    Berdasarkan gambar tersebut, manakah pernyataan berikut yang benar?<br>
    <b>Jawaban benar lebih dari satu.</b>
  `,
  options: [
    "Volume balok 10 kali volume kubus.",
    "Selisih volume kubus dan balok pada gambar 704 cmÂ³.",
    "Volume gabungan balok dan kubus pada gambar 832 cmÂ³."
  ],
  correct: [1, 2]
},
{
  type: "true_false",
  text: `
    Diketahui sebuah bak air berukuran seperti pada gambar berikut.<br><br>
    <img src="https://i.imgur.com/o3GJvNP.png"
         alt="Gambar bak air"
         style="max-width:320px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.2); margin-top:8px;"><br><br>
    Berdasarkan gambar tersebut, tentukan Benar atau Salah untuk setiap pernyataan berikut!
  `,
  statements: [
    "Volume air yang diperlukan untuk mengisi bak hingga penuh adalah 288 liter.",
    "Jika bak terisi air setengahnya, volume air dalam bak adalah 144 liter.",
    "Jika bak terisi air setinggi 6 dm, volume air dalam bak adalah 216 liter."
  ],
  correct: [false, false, true]
},
{
  type: "mc",
  text: `
    Sebuah taman berbentuk seperti gambar berikut.<br><br>
    <div style="text-align:center; margin:10px 0;">
      <img src="https://i.imgur.com/cCEHRtV.png"
           alt="Gambar taman berbentuk lingkaran"
           style="width:250px; border:3px solid #0077b6; border-radius:10px; box-shadow:0 0 8px rgba(0,0,0,0.3);">
    </div>
    Sinta berjalan-jalan mengelilingi taman. Ia memulai langkah dari titik <b>A</b>,
    lalu menyusuri jalur taman secara melingkar searah putaran jarum jam,
    melewati titik <b>B</b>, dan berhenti di titik <b>C</b> untuk beristirahat.<br><br>
    <b>Berapakah besar sudut pusat yang dilalui Sinta dari titik awal hingga tempat beristirahat?</b>
  `,
  options: [
    "90Â°",
    "135Â°",
    "180Â°",
    "225Â°"
  ],
  correct: 1
},
{
  type: "mc",
  text: `
    <p>Kelas 5A SD Tunas Harapan mengadakan pemilihan ketua kelas. Ada empat calon, yaitu
    Budi, Siti, Rino, dan Ayu. Hasil penghitungan suara ditampilkan dalam tabel berikut.</p>

    <table style="border: 3px solid #0077b6; border-collapse: collapse; text-align: center; margin: 10px 0; width: 60%;">
      <tr style="background-color: #caf0f8;">
        <th style="border: 3px solid #0077b6; padding: 6px;">Calon Ketua Kelas</th>
        <th style="border: 3px solid #0077b6; padding: 6px;">Jumlah Suara</th>
      </tr>
      <tr><td style="border: 3px solid #0077b6;">Budi</td><td style="border: 3px solid #0077b6;">12</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Siti</td><td style="border: 3px solid #0077b6;">18</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Rino</td><td style="border: 3px solid #0077b6;">15</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Ayu</td><td style="border: 3px solid #0077b6;">9</td></tr>
    </table>

    <p>Data tersebut akan ditampilkan dalam diagram gambar (piktogram) dengan keterangan:</p>
    <ul>
      <li>ğŸŸ¦ = 6 suara</li>
      <li>ğŸŸ© = 3 suara</li>
    </ul>
    <p>Piktogram yang paling tepat adalah â€¦.</p>
  `,
  options: [
    `
    <table style="border: 3px solid #0077b6; border-collapse: collapse; text-align: center; width: 60%;">
      <tr style="background-color: #caf0f8;">
        <th style="border: 3px solid #0077b6; padding: 6px;">Calon Ketua Kelas</th>
        <th style="border: 3px solid #0077b6; padding: 6px;">Piktogram</th>
      </tr>
      <tr><td style="border: 3px solid #0077b6;">Budi</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Siti</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦ğŸŸ¦</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Rino</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ©</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Ayu</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ©</td></tr>
    </table>
    `,
    `
    <table style="border: 3px solid #0077b6; border-collapse: collapse; text-align: center; width: 60%;">
      <tr style="background-color: #caf0f8;">
        <th style="border: 3px solid #0077b6; padding: 6px;">Calon Ketua Kelas</th>
        <th style="border: 3px solid #0077b6; padding: 6px;">Piktogram</th>
      </tr>
      <tr><td style="border: 3px solid #0077b6;">Budi</td><td style="border: 3px solid #0077b6;">ğŸŸ¦</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Siti</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦ğŸŸ©</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Rino</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦ğŸŸ©</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Ayu</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ©</td></tr>
    </table>
    `,
    `
    <table style="border: 3px solid #0077b6; border-collapse: collapse; text-align: center; width: 60%;">
      <tr style="background-color: #caf0f8;">
        <th style="border: 3px solid #0077b6; padding: 6px;">Calon Ketua Kelas</th>
        <th style="border: 3px solid #0077b6; padding: 6px;">Piktogram</th>
      </tr>
      <tr><td style="border: 3px solid #0077b6;">Budi</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Siti</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦ğŸŸ¦</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Rino</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦ğŸŸ©</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Ayu</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ©</td></tr>
    </table>
    `,
    `
    <table style="border: 3px solid #0077b6; border-collapse: collapse; text-align: center; width: 60%;">
      <tr style="background-color: #caf0f8;">
        <th style="border: 3px solid #0077b6; padding: 6px;">Calon Ketua Kelas</th>
        <th style="border: 3px solid #0077b6; padding: 6px;">Piktogram</th>
      </tr>
      <tr><td style="border: 3px solid #0077b6;">Budi</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Siti</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦ğŸŸ¦</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Rino</td><td style="border: 3px solid #0077b6;">ğŸŸ¦ğŸŸ¦ğŸŸ©</td></tr>
      <tr><td style="border: 3px solid #0077b6;">Ayu</td><td style="border: 3px solid #0077b6;">ğŸŸ¦</td></tr>
    </table>
    `
  ],
  correct: 2
},

{
  type: "mc_multiple",
  text: `
    Data hasil panen buah-buahan di kebun Pak Toni selama satu bulan disajikan dalam tabel berikut:<br><br>
    <table style="border-collapse: collapse; margin: 0px 0;">
      <tr>
        <th style="border: 1px solid #000; padding: 4px 8px;">Jenis Buah</th>
        <th style="border: 1px solid #000; padding: 4px 8px;">Jumlah (kg)</th>
      </tr>
      <tr>
        <td style="border: 1px solid #000; padding: 4px 8px;">Apel</td>
        <td style="border: 1px solid #000; padding: 4px 8px;">45</td>
      </tr>
      <tr>
        <td style="border: 1px solid #000; padding: 4px 8px;">Jeruk</td>
        <td style="border: 1px solid #000; padding: 4px 8px;">30</td>
      </tr>
      <tr>
        <td style="border: 1px solid #000; padding: 4px 8px;">Mangga</td>
        <td style="border: 1px solid #000; padding: 4px 8px;">50</td>
      </tr>
      <tr>
        <td style="border: 1px solid #000; padding: 4px 8px;">Anggur</td>
        <td style="border: 1px solid #000; padding: 4px 8px;">25</td>
      </tr>
    </table><br>
    Dari data di atas, manakah pernyataan yang benar mengenai hasil panen buah-buahan Pak Toni?<br>
    <b>Jawaban benar lebih dari satu.</b>
  `,
  options: [
    "Total panen anggur dan jeruk lebih banyak dibandingkan dengan panen mangga.",
    "Jumlah seluruh hasil panen dari semua buah mencapai 150 kg.",
    "Hasil panen apel lebih banyak 25 kg dibandingkan dengan anggur."
  ],
  correct: [0, 1]
},
{
  type: "mc",
  text: `
    Diagram berikut menunjukkan jenis olahraga favorit murid.<br>
    Setiap <b>ğŸ‘¤</b> mewakili <b>5 murid</b> dan setiap <b>ğŸ§</b> mewakili <b>2 murid</b>.<br><br>

    <table border="2" cellpadding="8"
      style="border-collapse: collapse; text-align: center; border: 2px solid black;">
      <tr style="background-color: #f2f2f2;">
        <th style="border: 2px solid black;">Jenis Olahraga</th>
        <th style="border: 2px solid black;">Banyak Murid</th>
      </tr>
      <tr>
        <td style="border: 2px solid black;">Sepak Bola</td>
        <td style="border: 2px solid black;">ğŸ‘¤ğŸ‘¤ğŸ‘¤ğŸ§ğŸ§ğŸ§</td>
      </tr>
      <tr>
        <td style="border: 2px solid black;">Basket</td>
        <td style="border: 2px solid black;">ğŸ‘¤ğŸ‘¤ğŸ§</td>
      </tr>
      <tr>
        <td style="border: 2px solid black;">Renang</td>
        <td style="border: 2px solid black;">ğŸ‘¤ğŸ§</td>
      </tr>
      <tr>
        <td style="border: 2px solid black;">Bulu Tangkis</td>
        <td style="border: 2px solid black;">ğŸ‘¤ğŸ‘¤ğŸ§ğŸ§</td>
      </tr>
    </table>

    <br>
    Berdasarkan data di atas, olahraga apa yang paling banyak disukai oleh murid?
  `,
  options: [
    "Basket",
    "Renang",
    "Sepak bola",
    "Bulu tangkis"
  ],
  correct: 2
},

];

let answers = questions.map(q => {
  if (q.type === 'mc_multiple') return [];
  if (q.type === 'true_false') return Array(q.statements.length).fill(null);
  return null;
});
let currentQuestion = 0;
let timerRunning = true;

const questionDisplay = document.getElementById('questionDisplay');
const questionButtonsContainer = document.getElementById('questionButtons');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
const scoreDisplay = document.getElementById('scoreDisplay');
const timerDisplay = document.getElementById('timer');

function renderQuestionButtons() {
  questionButtonsContainer.innerHTML = '';
  questions.forEach((_, i) => {
    const btn = document.createElement('button');
    btn.textContent = i + 1;
    if (i === currentQuestion) btn.classList.add('active');
    if (answers[i] !== null && (Array.isArray(answers[i]) ? answers[i].some(v => v !== null) : true)) {
      btn.style.backgroundColor = '#43a047';
      btn.style.color = 'white';
    }
    btn.addEventListener('click', () => {
      currentQuestion = i;
      renderQuestion(currentQuestion);
      updateNavButtons();
    });
    questionButtonsContainer.appendChild(btn);
  });
}

function renderQuestion(index) {
  const q = questions[index];
  let html = `<h3>Soal ${index + 1}</h3><p>${q.text}</p>`;

  if (q.type === 'mc') {
    q.options.forEach((opt, i) => {
      const checked = answers[index] === i ? 'checked' : '';
      html += `<label class="option">
        <input type="radio" name="option" value="${i}" ${checked}> ${opt}
      </label>`;
    });
  }
  else if (q.type === 'mc_multiple') {
    q.options.forEach((opt, i) => {
      const checked = answers[index].includes(i) ? 'checked' : '';
      html += `<label class="option">
        <input type="checkbox" value="${i}" ${checked}> ${opt}
      </label>`;
    });
  }

  else if (q.type === 'true_false') {
    html += `<table class="true-false">
      <tr><th>Pernyataan</th><th>Benar</th><th>Salah</th></tr>`;
    q.statements.forEach((stmt, i) => {
      const benarChecked = answers[index][i] === true ? 'checked' : '';
      const salahChecked = answers[index][i] === false ? 'checked' : '';
      html += `
      <tr>
        <td style="text-align:left;">${stmt}</td>
        <td><input type="radio" name="tf_${i}" value="true" ${benarChecked}></td>
        <td><input type="radio" name="tf_${i}" value="false" ${salahChecked}></td>
      </tr>`;
    });
    html += `</table>`;
  }

  questionDisplay.innerHTML = html;
  if (window.MathJax) MathJax.typesetPromise([questionDisplay]);

  // Event listener untuk tipe mc
  const options = document.querySelectorAll('input[name="option"]');
  options.forEach(option => {
    option.addEventListener('change', (e) => {
      answers[index] = parseInt(e.target.value);
      renderQuestionButtons();
    });
  });
  // Event listener untuk tipe mc_multiple
  if (q.type === 'mc_multiple') {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(chk => {
      chk.addEventListener('change', e => {
        const val = parseInt(e.target.value);
        if (e.target.checked) {
          if (!answers[index].includes(val)) answers[index].push(val);
        } else {
          answers[index] = answers[index].filter(v => v !== val);
        }
        renderQuestionButtons();
      });
    });
  }

  // Event listener untuk tipe benar-salah
  if (q.type === 'true_false') {
    q.statements.forEach((_, i) => {
      document.querySelectorAll(`input[name="tf_${i}"]`).forEach(radio => {
        radio.addEventListener('change', e => {
          answers[index][i] = (e.target.value === 'true');
          renderQuestionButtons();
        });
      });
    });
  }

  updateButtons();
  updateNavButtons();
}

function updateButtons() {
  const buttons = document.querySelectorAll('.question-buttons button');
  buttons.forEach((btn, idx) => {
    btn.classList.toggle('active', idx === currentQuestion);
  });
}

function updateNavButtons() {
  prevBtn.disabled = currentQuestion === 0;
  nextBtn.disabled = currentQuestion === questions.length - 1;
  submitBtn.style.display = currentQuestion === questions.length - 1 ? 'inline-block' : 'none';
}

function arraysEqual(a, b) {
  if (!Array.isArray(a) || !Array.isArray(b)) return false;
  if (a.length !== b.length) return false;
  return a.every((val, i) => val === b[i]);
}

function calculateScore() {
  let score = 0;

  questions.forEach((q, i) => {
    if (q.type === 'mc' && answers[i] === q.correct) score++;
    else if (q.type === 'true_false' && arraysEqual(answers[i], q.correct)) score++;
    else if (q.type === 'tepat_tidak' && arraysEqual(answers[i], q.correct)) score++;
    else if (q.type === 'mc_multiple' && arraysEqual(answers[i].sort(), q.correct.sort())) score++;
    else if (q.type === 'benefit_challenge' && arraysEqual(answers[i], q.correct)) score++;
    else if (q.type === 'true_false_en' && arraysEqual(answers[i], q.correct)) score++;
    else if (q.type === 'fact_opinion' && arraysEqual(answers[i], q.correct)) score++;
  });

  // Hitung skor 0â€“100
  const percentage = Math.round((score / questions.length) * 100);

  // Tampilkan hanya skor akhir dalam bentuk nilai
  scoreDisplay.textContent = `Skor Anda: ${percentage}`;
  scoreDisplay.style.display = 'block';
// ğŸ”¥ KIRIM KE FIREBASE
  simpanHasilFirebase(percentage);
}
function disableAll() {
  document.querySelectorAll('button').forEach(btn => btn.disabled = true);
  document.querySelectorAll('input').forEach(inp => inp.disabled = true);
}

function endTryout() {
  if (timerRunning) {
    calculateScore();
    disableAll();
    timerRunning = false;
  }
}

submitBtn.addEventListener('click', () => { endTryout(); submitBtn.disabled = true; });
prevBtn.addEventListener('click', () => { if (currentQuestion > 0) { currentQuestion--; renderQuestion(currentQuestion); } });
nextBtn.addEventListener('click', () => { if (currentQuestion < questions.length - 1) { currentQuestion++; renderQuestion(currentQuestion); } });

function startTimer(duration) {
  let timer = duration;
  timerRunning = true; // pastikan timer aktif

  const interval = setInterval(() => {
    if (!timerRunning) { 
      clearInterval(interval); 
      return; 
    }

    const minutes = Math.floor(timer / 60);
    const seconds = timer % 60;
    timerDisplay.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;

    if (timer <= 0) {
      clearInterval(interval);
      endTryout();
      alert("Waktu habis! Jawaban Anda telah disubmit.");
    }

    timer--;
  }, 1000);
}


const fullscreenBtn = document.getElementById("fullscreenBtn");
fullscreenBtn.addEventListener("click", () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen().catch(err => {
      alert(`Gagal masuk fullscreen: ${err.message}`);
    });
    fullscreenBtn.textContent = "Exit Fullscreen";
  } else {
    document.exitFullscreen();
    fullscreenBtn.textContent = "Fullscreen";
  }
});
checkSession();
  </script>
<!-- FIREBASE SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAY-bJOK6QLFhpi5lQMLGNxsxIe8JNUvpg",
    authDomain: "tryout-kebun-ilmu.firebaseapp.com",
    projectId: "tryout-kebun-ilmu",
    storageBucket: "tryout-kebun-ilmu.firebasestorage.app",
    messagingSenderId: "497636674894",
    appId: "1:497636674894:web:82fb38cb615d8bf7b1a21f"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // supaya bisa dipakai di script lain
  window.db = db;

  // ğŸ”¥ INI YANG PALING PENTING
  window.simpanHasilFirebase = async function (nilai) {
    const { addDoc, collection, serverTimestamp } = await import(
      "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"
    );

    await addDoc(collection(window.db, "hasil_ujian"), {
  nik: window.dataPeserta.nik,
  nama: window.dataPeserta.nama,
  jk: window.dataPeserta.jk,
  tglLahir: window.dataPeserta.tgl,
  sekolah: window.dataPeserta.sekolah,
  mapel: "Matematika SD/MI", // tambah field mapel
  nilai: nilai,
  waktu: new Date().toISOString()
});


    console.log("âœ… HASIL UJIAN TERSIMPAN");
  };
</script>

</body>
</html>
